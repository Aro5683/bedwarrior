<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B.Ed Premium Notes</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2c3e50">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f4f4f4;
  text-align:center;
}

header{
  background:#2c3e50;
  color:white;
  padding:20px;
}

.container{
  padding:30px;
}

button{
  padding:12px 20px;
  margin:10px;
  border:none;
  background:#2c3e50;
  color:white;
  cursor:pointer;
  font-size:16px;
}

button:hover{
  background:#34495e;
}

#installBtn{
  display:none;
  background:#27ae60;
}

#status{
  margin-top:15px;
  font-weight:bold;
}
</style>
</head>
<body>

<header>
<h2>ðŸ“˜ B.Ed Premium Notes</h2>
<p>Offline â€¢ Secure â€¢ One Device</p>
</header>

<div class="container">

<button id="installBtn">ðŸ“² Install App</button>

<br><br>

<input type="file" id="bedxFile">
<div id="status"></div>

</div>

<script>

// =======================
// SERVICE WORKER REGISTER
// =======================
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}

// =======================
// INSTALL BUTTON LOGIC
// =======================

let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "inline-block";
});

installBtn.addEventListener("click", async () => {
  if (!deferredPrompt) return;

  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;

  if (outcome === "accepted") {
    console.log("App installed");
  }

  deferredPrompt = null;
  installBtn.style.display = "none";
});

window.addEventListener("appinstalled", () => {
  installBtn.style.display = "none";
});

// =======================
// SIMPLE FILE CHECK DEMO
// =======================

document.getElementById("bedxFile").addEventListener("change", function(){
  const file = this.files[0];
  if(!file) return;

  document.getElementById("status").innerHTML =
    "File selected: " + file.name + "<br>Ready to verify...";

  // Your bedx viewer logic will go here
});

</script>

</body>
</html>
